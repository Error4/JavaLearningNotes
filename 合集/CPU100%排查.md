1.Windows

#### 查消耗Cpu最高的进程PID

#### 根据PID查出消耗Cpu最高的线程号(微软的工具Process Explorer)
它是十进制的数据，转成十六进制

#### 根据线程号查出对应的java线程，进行处理

执行命令

```java
jstack -l 10856 > c:/10856.stack
```

打开文件，搜索对应十六进制线程ID

2.Linux

#### 查消耗Cpu最高的进程PID

执行命令

- 执行`top -c` ，显示进程运行信息列表。按下P,进程按照Cpu使用率排序
- 假设`PID`为`3033`的进程耗费`Cpu`最高

#### 根据Pid查出消耗Cpu最高的线程号

执行命令

- `top -Hp 3033` ，显示一个进程的线程运行信息列表。按下P,进程按照Cpu使用率排序

-H 显示线程信息,-p指定线程ID 

假设`PID`为`3034`的线程耗费Cpu最高

这是十进制的数据，转成十六进制为`0Xbda`

#### 根据线程号查出对应的java线程，进行处理

```
jstack -l 3033 > ./3033.stack
```

然后执行，grep命令，看线程`0xbda`做了什么

```
cat 3033.stack |grep 'bda' -C 8
```